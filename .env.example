###BEGIN GENERAL###
STACK_NAME=stk-jumpserver-001
STACK_BINDMOUNTROOT=custom/docker/stacks
TZ=America/New_York
UID=0
GID=0
SERVICE_BIND_ADDRESS_EXTERNAL=0.0.0.0
SERVICE_BIND_ADDRESS_INTERNAL=127.0.0.1
DNSSERVER=1.1.1.1
###END GENERAL###

###BEGIN DATABASE###
DATABASE_IMAGENAME=docker.io/library/postgres
DATABASE_IMAGEVERSION=15-alpine
DATABASE_ENABLEAUTOMATICUPDATES=false
DATABASE_HOST=JUMPSERVER-DB-001
DATABASE_PORT=5432
DATABASE_USER=jumpserver
DATABASE_PASSWORD=ChangeMe_DatabasePassword123!
DATABASE_NAME=jumpserver
DATABASE_DATA_PATH_INTERNAL=/var/lib/postgresql/data
###END DATABASE###

###BEGIN REDIS###
REDIS_IMAGENAME=docker.io/library/redis
REDIS_IMAGEVERSION=7-alpine
REDIS_ENABLEAUTOMATICUPDATES=false
REDIS_HOST=JUMPSERVER-REDIS-001
REDIS_PORT=6379
REDIS_PASSWORD=
###END REDIS###

###BEGIN APPLICATION###
APPLICATION_IMAGENAME=jumpserver/jumpserver
APPLICATION_IMAGEVERSION=latest
APPLICATION_ENABLEAUTOMATICUPDATES=true
APPLICATION_PORT_EXTERNAL=8080
APPLICATION_WS_PORT_EXTERNAL=8070
EXTERNAL_URL=https://jumpserver.yourdomain.com
###END APPLICATION###

###BEGIN JUMPSERVER CORE CONFIG###
# SECURITY WARNING: Generate a random secret key for production!
# Generate with: cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50
SECRET_KEY=ChangeMe_SecretKey_Generate_Random_50_Characters_Here

# SECURITY WARNING: Generate a random bootstrap token for production!
# Generate with: cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 24
BOOTSTRAP_TOKEN=ChangeMe_BootstrapToken_24_Chars

# Logging Configuration
LOG_LEVEL=INFO
# LOG_DIR=/opt/jumpserver/logs

# Session Configuration
SESSION_COOKIE_AGE=3600
SESSION_EXPIRE_AT_BROWSER_CLOSE=false
###END JUMPSERVER CORE CONFIG###

###BEGIN SECURITY SETTINGS###
# Multi-Factor Authentication: 0=Disabled, 1=Global, 2=Admin Only
SECURITY_MFA_AUTH=0
SECURITY_MFA_AUTH_ENABLED_FOR_THIRD_PARTY=true
SECURITY_MFA_BY_EMAIL=false

# Session Security
SECURITY_MAX_IDLE_TIME=30
SECURITY_MAX_SESSION_TIME=24
SECURITY_VIEW_AUTH_NEED_MFA=true

# Password Policy
SECURITY_PASSWORD_EXPIRATION_TIME=9999
SECURITY_PASSWORD_MIN_LENGTH=6
SECURITY_ADMIN_USER_PASSWORD_MIN_LENGTH=8
SECURITY_PASSWORD_UPPER_CASE=false
SECURITY_PASSWORD_LOWER_CASE=false
SECURITY_PASSWORD_NUMBER=false
SECURITY_PASSWORD_SPECIAL_CHAR=false

# Command Security
SECURITY_COMMAND_EXECUTION=false
SECURITY_INSECURE_COMMAND=false
SECURITY_INSECURE_COMMAND_LEVEL=5

# Login Security
SECURITY_LOGIN_CAPTCHA_ENABLED=true
SECURITY_LOGIN_CHALLENGE_ENABLED=false
SECURITY_LOGIN_LIMIT_COUNT=7
SECURITY_LOGIN_LIMIT_TIME=30

# Watermark Settings
SECURITY_WATERMARK_ENABLED=true
SECURITY_WATERMARK_SESSION_CONTENT=${name}(${userName})\n${assetName}
SECURITY_WATERMARK_CONSOLE_CONTENT=${userName}(${name})

# Access Control
ONLY_ALLOW_EXIST_USER_AUTH=false
ONLY_ALLOW_AUTH_FROM_SOURCE=false
USER_LOGIN_SINGLE_MACHINE_ENABLED=false
###END SECURITY SETTINGS###

###BEGIN AUTHENTICATION###
# LDAP/AD Configuration (Optional)
AUTH_LDAP=false
AUTH_LDAP_SERVER_URI=ldap://localhost:389
AUTH_LDAP_BIND_DN=
AUTH_LDAP_BIND_PASSWORD=
AUTH_LDAP_SEARCH_OU=ou=people,dc=jumpserver,dc=org
AUTH_LDAP_SEARCH_FILTER=(cn=%(user)s)
AUTH_LDAP_ATTR_MAP={"username": "cn", "name": "sn", "email": "mail"}
AUTH_LDAP_START_TLS=false

# OIDC Configuration (Optional)
AUTH_OPENID=false
BASE_SITE_URL=
AUTH_OPENID_CLIENT_ID=
AUTH_OPENID_CLIENT_SECRET=
AUTH_OPENID_PROVIDER_ENDPOINT=
AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT=
AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT=
AUTH_OPENID_PROVIDER_JWKS_ENDPOINT=
AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT=
AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT=
AUTH_OPENID_PROVIDER_SIGNATURE_ALG=HS256
AUTH_OPENID_PROVIDER_SIGNATURE_KEY=
AUTH_OPENID_SCOPES=openid profile email
AUTH_OPENID_ID_TOKEN_MAX_AGE=60
AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIMS=true
AUTH_OPENID_USE_STATE=true
AUTH_OPENID_USE_NONCE=true
AUTH_OPENID_SHARE_SESSION=true
AUTH_OPENID_IGNORE_SSL_VERIFICATION=false

# SAML2 Configuration (Optional)
AUTH_SAML2=false
SAML2_LOGOUT_COMPLETELY=true
AUTH_SAML2_ALWAYS_UPDATE_USER=true
###END AUTHENTICATION###

###BEGIN NOTIFICATIONS###
# Email Configuration (Optional)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
EMAIL_USE_TLS=true
EMAIL_USE_SSL=false
EMAIL_SUBJECT_PREFIX=[JumpServer]

# SMS Configuration (Optional)
SMS_ENABLED=false
SMS_BACKEND=
###END NOTIFICATIONS###

###BEGIN STORAGE###
# Default Storage (local)
DEFAULT_FILE_STORAGE=jumpserver.storage.LocalFileStorage

# Session Recording Storage
TERMINAL_REPLAY_STORAGE={}
TERMINAL_COMMAND_STORAGE={}

# S3 Storage Configuration (Optional)
# DEFAULT_FILE_STORAGE=jumpserver.storage.S3Storage
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_STORAGE_BUCKET_NAME=
# AWS_S3_REGION_NAME=
# AWS_S3_ENDPOINT_URL=
###END STORAGE###
